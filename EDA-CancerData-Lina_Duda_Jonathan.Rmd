---
Authors: 'Lina Gurevich, Duda Espindola, Jonathan D''Souza '
Date: 9/25/2018
Output:
  pdf_document: default
  html_document: default
Title: Exploratory Data Analysis - Cancer Mortality Rate
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(car)
```

# Executive Summary
Given a Data Set for cancer incidences for a select group of counties.... this study attempts to explore the relationships between the outcome variable : Death Rate and other key independent variables.


------

#Detailed Steps and Findings

## Initial Loading and Validation of Data Set

##### Set Up
```{r LoadData}
raw_data<-read.csv("cancer.csv")  #Assumes file in current working directory
cancer<-raw_data #Keep one copy of raw data as is
```

##### Summarize Data Set

```{r ShowData}
str(cancer)
summary(cancer)
```

#####Validation of Independent Variables

There are 2 variables with null values: PctSomeCol18_24 and PctEmployed16_Over.


From the summary of the Median Age it is clear that there are some outliers above 100 years given the max of 624 compared to median & mean in the 40s. We set these outliers to NA values.

```{r DataValidation_2}
#Check medianAge based on summary

ageoutliers<-cancer[cancer$MedianAge>100,]  
summary(ageoutliers$MedianAge) # 
cancer$MedianAge[cancer$MedianAge>300]<-NA  # Set outlier values to NA
```


The sum of the variables percentage employed and unemployed over 16 has a surprisingly broad distribution around the mean of 62.01, when one would expect it to be close to (if not) 100%. 


```{r DataValidation_1}
Emp.UnEmp<-cancer$PctEmployed16_Over+cancer$PctUnemployed16_Over
summary(Emp.UnEmp)
hist(Emp.UnEmp,breaks="fd",main="Distribution of Employment data per county",xlab="Percent of 16_over employed and unemployed")
```
We note this for now as we analyze other variables.


##### Validation of potential Outcome Variables.

There are 2 variables we considered as potential outcome variables: Death Rate (assumed to be number of death per 100,000 population) and Average Annual Count (assumed to be annual Cancer Indidence Rate)

```{r DataValidation_3}

#Annual Indident Rate is better expressed as a percentage of county population
cancer$AnnCountPercent<-with(cancer,100*avgAnnCount/popEst2015)
summary(cancer$AnnCountPercent)
#Look for where the outlier might be coming from

hist(cancer$avgAnnCount,breaks="fd",main="Average Annual Count Distrubution",xlab="Average Annual Count",xlim=c(0,10000))
outliers<-cancer[cancer$AnnCountPercent>50,] #Assuming anything over 50% incident rate has to be an error
summary(outliers$avgAnnCount)
#Clearly all of these have the exact same erroneous value for Average Annual Count.
error_value<-outliers[1,"avgAnnCount"]
cancer$avgAnnCount[cancer$avgAnnCount==error_value]<-NA
summary(cancer$avgAnnCount)
cancer$AnnCountPercent<-with(cancer,100*avgAnnCount/popEst2015) #Recalculate percentages
summary(cancer$AnnCountPercent)

summary(cancer$deathRate)
hist(cancer$deathRate,breaks="fd",main="Death Rate Distrubution",xlab="Death Rate")


scatterplot(AnnCountPercent~deathRate,data=cancer)

```





## Analysis of Key Variables
We have chosen to focus on the following variables in this study


:Key Variables
  
|Variable Name      |  Description                                                           |
|:------------------|:-----------------------------------------------------------------------|
|DeathRate          | Our output variable                                                    |
|avgAnnCount        | 2009-2013 mean incidences per county                                   |
|popEst2015         | Estimated population by county 2015                                    |
|PctPrivateCoverage | Percentage of the population with private insurance coverage           |
|PctPublicCoverage  | Percentage of the population with public insurance coverage            |
|PctEmpPrivCoverage | Percentage of population with empoyer private insurance coverage       |
|povertyPercent     | Percent of population below poverty line                               |
|MedianAge          | Median population age                                                  |
|medIncome          | Median Income                                                          |



## Analysis of Key Relationships
Explore how your outcome variable is related to the other variables in your dataset. Make sure to use visualizations to understand the nature of each bivariate relationship.
What transformations can you apply to clarify the relationships you see in the data? Be sure to justify each transformation you use.

```{r relationships, echo=FALSE}
# Seems to be a correlation between death rate and incidents and a negative correlation between birth rate and incidents
#scatterplotMatrix(~AnnCountPercent+popEst2015+BirthRate+deathRate,data=cleandata)

#Seems to be positive correlation between percentage of private coverage and incidents AS well as % of public coverage and incidents...? 
#scatterplotMatrix(~AnnCountPercent+PctPrivateCoverage+PctEmpPrivCoverage+PctPublicCoverage,data=cleandata)

#scatterplotMatrix(~AnnCountPercent+PctEmployed16_Over+PctUnemployed16_Over,data=cleandata)
```




## Analysis of Secondary Effects (10 pts)
What secondary variables might have confounding effects on the relationships you have identified? Ex- plain how these variables affect your understanding of the data.


##Conclusion (20 pts)

Summarize your exploratory analysis. What can you conclude based on your analysis? 2



